<!DOCTYPE html>
<html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="refresh" content = "1200; url=http://localhost/nursing/profile_hospital.html#">
	<title>POST | Placement of Healthcare Professionals</title>
	<link rel="icon" href="image/favicon.png">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="" name="keywords">
	<meta content="" name="description">

	<!-- Facebook Opengraph integration: https://developers.facebook.com/docs/sharing/opengraph -->
	<meta property="og:title" content="">
	<meta property="og:image" content="">
	<meta property="og:url" content="">
	<meta property="og:site_name" content="">
	<meta property="og:description" content="">

	<!-- Twitter Cards integration: https://dev.twitter.com/cards/  -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="">
	<meta name="twitter:title" content="">
	<meta name="twitter:description" content="">
	<meta name="twitter:image" content="">

	<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- CSS bootstrap -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/style3.css">
    <link rel="stylesheet" type="text/css" href="css/animate.css">
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/jquery-confirm.min.css">




    <style type="text/css">
    	
    	#mod{

		  background: #1A2980;  /* fallback for old browsers */
		  background: -webkit-linear-gradient(45deg, #26D0CE, #1A2980);  /* Chrome 10-25, Safari 5.1-6 */
		  background: linear-gradient(45deg, #26D0CE, #1A2980); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */


		}
    </style>

</head>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.5/angular.js"></script>
<body>

	<div id="preloader"></div>


<div id="menu"></div>
<div class="container-fluid p-2" style="margin-top: -40px; background: linear-gradient(45deg, #26D0CE, #1A2980); color: white"><a href="profile_hospital.html"><b>Profile Home</b></a></div>


<main style="">
        <div class="container" style="min-height: 600px;">

        		<br>
        		<div class="row">
        			<div class="col-md-12" align="center">
        				<button class="btn" style="background-color: #26D0CE; color: white" onclick="$('#post_job_button').toggle()"><i class="fa fa-plus"> <b>Add new Job</b></i></button>
        			</div>
        		</div>
        		<div id="post_job_button">
        		<div class="row justify-content-center">
        			

        			<div class="col-md-12 p-3" align="center">
        				<div class="card">

        					<div class="card-header"><h5 style="color: #26D0CE"><b>POST</b> a job</h5></div>
						  
						  <div class="card-body p-5" align="left">

						  	<form method="post" id="f1" class="form">

						  		<input type="hidden" name="h_id" id="h_id">
						  		<div class="row">
						  			<div class="form-group col-md-4">
						  				<label>Job Title</label>
						  			</div>
						  			<div class="form-group col-md-8">
						  				<input type="text" class="form-control" name="job_title" id="job_title" placeholder="Choose a title">
						  			</div>
						  		</div>

						  		<div class="row" >
						  			<div class="form-group col-md-4">
						  				<label>Job Category</label>
						  			</div>
						  			<div class="form-group col-md-8">
						  				<select name="job_cat" id="job_cat" class="form-control" required>
						  					<option value="">Choose one</option>

						  				</select>
						  			</div>
						  		</div>

						  		<div class="row">
						  			<div class="form-group col-md-4">
						  				<label>Job Description</label>
						  			</div>
						  			<div class="form-group col-md-8">
						  				<textarea class="form-control" name="job_des" id="job_des" placeholder="Description of the job"></textarea>
						  			</div>
						  		</div>

						  		<div class="row">
						  			<div class="form-group col-md-4">
						  				<label>No of Vacancies</label>
						  			</div>
						  			<div class="form-group col-md-8">
						  				<input type="number" class="form-control" name="job_no" id="job_no" placeholder="Number of vacancies">
						  			</div>
						  		</div>

						  		<div class="row">
						  			<div class="form-group col-md-4">
						  				<label>Minimum Experience</label>
						  			</div>
						  			<div class="form-group col-md-8">
						  				<input type="number" class="form-control" name="min_exp" id="min_exp" placeholder="Minimum year of Experience (in years e.g. 1.5)">
						  			</div>
						  		</div>

						  		<div class="row">
						  			<div class="form-group col-md-4">
						  				<label>Job Location</label>
						  			</div>
						  			<div class="form-group col-md-8">
						  				<input type="text" class="form-control" name="job_location" id="job_location" placeholder="Job location (Name of the city)">
						  			</div>
						  		</div>
						    
						  </div>
						  <div class="card-footer">
						  <button class="btn btn-primary" type="submit">Submit Job</button>
						  <button class="btn btn-danger" type="reset">Reset</button>
						</div>
						</form>
						</div>
        			</div>       			

        		</div>
        	</div>

        		<hr>
        		<div class="container">
        			<div class="row" >
        				<div class="col-12"><span class="pull-right"><ul id="pagination-demo" class="pagination-sm"></ul></span></div>
        			</div>
        		</div>
        		<br>
        		
	        		<div id="job_list">
		        		   			

	        		</div>





       	</div>

       	<!-- Modal for edit -->


       	<div class="modal fade" id="edit_job_modal">
		  <div class="modal-dialog modal-lg modal-dialog-centered">
		    <div class="modal-content">

		      <!-- Modal Header -->
		      <div class="modal-header">
		        <h4 class="modal-title">Edit Job</h4>
		        <button type="button" class="close" data-dismiss="modal">&times;</button>
		      </div>

		      <!-- Modal body -->
		      <div class="modal-body">
		      	<form method="post" id="f2" class="form">
		       <div id="edit_job_modal_body"></div>
		      </div>

		      <!-- Modal footer -->
		      <div class="modal-footer">
		        <button type="submit" class="btn btn-primary">Update</button>
		        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
		      </div>
		  	</form>

		    </div>
		  </div>
		</div>



		<!-- Modal for delete -->


		<div class="modal fade" id="edit_job_modal">
		  <div class="modal-dialog modal-lg modal-dialog-centered">
		    <div class="modal-content">

		      <!-- Modal Header -->
		      <div class="modal-header">
		        <h4 class="modal-title">Edit Job</h4>
		        <button type="button" class="close" data-dismiss="modal">&times;</button>
		      </div>

		      <!-- Modal body -->
		      <div class="modal-body">
		      	<form method="post" id="f2" class="form">
		       <div id="edit_job_modal_body"></div>
		      </div>

		      <!-- Modal footer -->
		      <div class="modal-footer">
		        <button type="submit" class="btn btn-primary">Update</button>
		        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
		      </div>
		  	</form>

		    </div>
		  </div>
		</div>



</main>




			<div class="container-fluid bg-white">

				<div class="container p-3">
				<div class="row">
					<div class="col-md-6 col-sm-12 col-xs-12">
						<h5>Contact us</h5>
						<p>Opposite to Jalukbari Masjid<br>Jalukbari<br>Ghy-14</p>
						<p>Call us at: 00000000000</p>
						<p>Mail us at: something@mail.com</p>
					</div>
					<div class="col-md-6 col-sm-12 col-xs-12" align="right">
						<a href="#"><i class="fa fa-facebook"></i></a>
						<a href="#"><i class="fa fa-twitter"></i></a>
						<a href="#"><i class="fa fa-instagram"></i></a>
						<a href="#"><i class="fa fa-envelope"></i></a>
						<a href="#"><i class="fa fa-google"></i></a>
						
					</div>
				</div>
				
					
				</div>
			</div>

			<div class="container-fluid sticky-bottom" style="background-color: #2f2f2f;" align="center">
					<div class="text-white">All right reserved @ POST <br>&copy; 2018</div>
			</div>


	<div class="overlay"></div>
</body>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script src="js/anime.min.js"></script>
<script src="js/wow.js"></script>
<script src="js/mdb.js"></script>
<script src="js/custom.js"></script>
<script src="js/jquery.pagination.js"></script>
<script src="js/jquery-confirm.min.js"></script>
<script src="js/custom_scrollbar.min.js"></script>

<script type="text/javascript">

	$(document).ready(function () {

		$("#menu").load('menu_h.html');

		$("#post_job_button").hide();




                $.ajax({

                    url: "php/hospital_session_check.php",
                    success:function(resp){
                        if(resp == true){
                            get_session_det();
                        }else{
                            window.location.href="hospital_login.html";
                        }
                    }
                });


                function get_session_det(){
                    $.ajax({
                        url: "php/get_session_det.php",
                        success:function(resp){
                            var e = JSON.parse(resp);
                            if(e[0] == "no"){
                                window.location.href="hospital_login.html";
                            }else{
                                $("#h_id").val(e[0]);
                                $("#name_hospital").html(e[1]);
                                $("#h_name").val(e[1]);
                                $("#phn").val(e[3]);
                                $("#email").val(e[4]);



                                get_hospital_det(e[0]);
                            }
                        },
                        error:function(resp){
                            alert(resp);
                        }
                    });
                }

                function get_hospital_det(n){
                    $.ajax({
                        url: "php/get_hospital_det.php",
                        type: "POST",
                        data: {
                            "n" : n,
                        },
                        success:function(resp){
                            var e = JSON.parse(resp);
                            if(e[0] == "no"){
                                window.location.href="hospital_login.html";
                            }else{
                                $("#h_id").val(e[0]);
                                $("#h_name").val(e[1]);
                                $("#h_des_short").val(e[2]);
                                $("#h_des_long").val(e[3]);
                                $("#region").val(e[4]);
                                $("#city").val(e[5]);
                                $("#state").val(e[6]);
                                $("#pin").val(e[7]);
                                $("#name1").html(e[1]);
                                $("#des1").html(e[2]);
                                //$("#des2").html(e[3]);
                                $("#address1").html(e[4] + "<br>" + e[5] + "<br>" + e[6] + ", " + e[7]);
                                $("#address2").html(e[9] + "<br>" + e[10]);

                                $("#dp1").html('<img class="rounded-circle" src="'+e[8]+'" style="width: 80%">');
                                $("#dp2").html('<img class="img-responsive" src="'+e[8]+'" style="width: 100%">');
                                
                            }
                        },
                        error:function(resp){
                            alert(resp);
                        }
                    });
                }


                //populate jobcat

                $.ajax({
		            	url: "php/get_job_cat.php",
		            	success:function(resp){

		            		resp = JSON.parse(resp);

		            		option = "";
		            		 
		            		 for(var i=0;i<resp.length;i++){
		            		 	option += '<option value="'+ resp[i][0] + '">' + resp[i][1] + '-'+ resp[i][2] +'</option>';
		            		 }

		            		 $("#job_cat").html(option);
		            	}
		            }); 
                    
             	

             	//pagination

             	$('#pagination-demo').twbsPagination({
			        totalPages: 10,
			        visiblePages: 3,
			        onPageClick: function (event, page) {
			            show_job_list(page);
			        }
			    });

                



        });        

	
		$("#f1").submit(function(event){

			event.preventDefault();

			var t = $("#f1").serialize();

			$.ajax({
				url: "php/post_a_job.php",
				type: "POST",
				data: t,
				success:function(resp){
					show_job_list(1);
					$.alert("Succesfully Posted");
					$("#f1")[0].reset();
				},
				error:function(resp){
					alert(resp);
				}
			});

		});	


		$("#f2").submit(function(event){

			event.preventDefault();

			var t = $("#f2").serialize();

			$.ajax({
				url: "php/edit_post_a_job.php",
				type: "POST",
				data: t,
				success:function(resp){
					show_job_list(1);
					$.alert("Succesfully Updated");
					$('#edit_job_modal').modal('toggle');
					//alert(resp);
				},
				error:function(resp){
					alert(resp);
				}
			});

		});	


		function show_job_list(n){

			$.ajax({
				url: "php/show_jobs.php",
				type: "POST",
				data: {
					"n" : n,
				},
				success:function(resp){
					$("#job_list").html(resp);
				},
				error:function(resp){
					alert(resp);
				}
			});

		} 


		function edit_job(n){
			$.ajax({
				url: "php/edit_job.php",
				type: "POST",
				data: {
					"n" : n,
				},
				beforeSend: function(){
					$("#edit_job_modal_body").html('<h5>Loading . . . .</h5>');
				},
				success:function(resp){
					$("#edit_job_modal_body").html(resp);
				},
				error:function(resp){
					alert(resp)
				}
			});
		}


	function delete_job(n){

		$.confirm({
		    title: 'Are you sure?',
		    buttons: {
		        confirm: function () {
		            $.ajax({
		            	url: "php/delete_job.php",
		            	type: "POST",
		            	data: {
		            		"n" : n,
		            	},
		            	success:function(resp){
		            		show_job_list(1);
		            		$.alert("Succesfully deleted");
		            	},
		            	error:function(resp){
		            		alert(resp);
		            	}
		            });
		        },
		        cancel: function () {
		            
		        },
		    }
		});

	}


		


</script>
</html>